<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://tap-sdks.b-cdn.net/card/1.0.2/index.js"></script>
    <title>Tap Card SDK Test</title>
</head>

<body>
    <h1>Tap Card SDK Test</h1>
    <div id="card-sdk-id"></div>

    <script>
        window.addEventListener('load', function () {
            console.log('Page loaded, waiting for CardSDK...');

            setTimeout(function () {
                if (!window.CardSDK) {
                    console.error('CardSDK not loaded!');
                    return;
                }

                console.log('CardSDK found, initializing...');
                const { renderTapCard, Theme, Currencies, Direction, Edges, Locale } = window.CardSDK;

                const { unmount } = renderTapCard('card-sdk-id', {
                    publicKey: 'pk_test_X93dkNK0gAGHB7yerPlp6nVE',
                    merchant: {
                        id: '58473337'
                    },
                    transaction: {
                        amount: 1,
                        currency: Currencies.SAR
                    },
                    customer: {
                        id: '',
                        name: [
                            { lang: Locale.EN, first: 'Test', last: 'Test', middle: 'Test' }
                        ],
                        nameOnCard: 'Test Test',
                        editable: true,
                        contact: {
                            email: 'test@test.com',
                            phone: {
                                countryCode: '20',
                                number: '1000000000'
                            }
                        }
                    },
                    acceptance: {
                        supportedBrands: ['AMERICAN_EXPRESS', 'VISA', 'MASTERCARD', 'MADA'],
                        supportedCards: "ALL"
                    },
                    fields: {
                        cardHolder: true
                    },
                    addons: {
                        displayPaymentBrands: true,
                        loader: true,
                        saveCard: true
                    },
                    interface: {
                        locale: Locale.EN,
                        theme: Theme.LIGHT,
                        edges: Edges.CURVED,
                        direction: Direction.LTR
                    },
                    onReady: () => console.log('✅ onReady'),
                    onFocus: () => console.log('onFocus'),
                    onBinIdentification: (data) => console.log('onBinIdentification', data),
                    onValidInput: (data) => console.log('onValidInputChange', data),
                    onInvalidInput: (data) => console.log('onInvalidInput', data),
                    onChangeSaveCardLater: (isSaveCardSelected) => console.log(isSaveCardSelected, " :onChangeSaveCardLater"),
                    onError: (data) => console.error('❌ onError', data),
                    onSuccess: (data) => console.log('✅ onSuccess', data)
                });

                console.log('renderTapCard called');
            }, 1000);
        });
    </script>
</body>

</html>